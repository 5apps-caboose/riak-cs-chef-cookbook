---
driver_plugin: vagrant

platforms:
- name: ubuntu-12.04
  driver_config:
    box: opscode-ubuntu-12.04
    box_url: http://opscode-vm-bento.s3.amazonaws.com/vagrant/virtualbox/opscode_ubuntu-12.04_chef-provisionerless.box
    vagrantfile_erb: Vagrantfile.erb
    customize:
      memory: 512
  run_list:
  - recipe[apt]
  attributes:
    riak:
      package:
        checksum:
          ubuntu:
            precise: "76593ae414cea84d42192a792b719b89d510ac917dfecacbbca2662ccabe5586"
    riak_cs:
      package:
        checksum:
          ubuntu:
            precise: "035c1f5172c0110ee825c60e683983bee69075df1663fe1fb81dbf8da500def7"
- name: debian-7.2.0
  driver_config:
    box: opscode-debian-7.2.0
    box_url: http://opscode-vm-bento.s3.amazonaws.com/vagrant/virtualbox/opscode_debian-7.2.0_chef-provisionerless.box
    vagrantfile_erb: Vagrantfile.erb
    customize:
      memory: 512
  run_list:
  - recipe[apt]
  attributes:
    riak:
      package:
        checksum:
          debian:
            "7": "7776338341cb8ddf4b8f4516b579d06ac47d224c5f0451e4ceb4172897a45c66"
    riak_cs:
      package:
        checksum:
          debian:
            "7": "d5ea187d4e0d95e65d0e3e1d82e331bdb027e4f1e5419b0831bee2b0a20efb8a"
- name: centos-6.5
  driver_config:
    box: opscode-centos-6.5
    box_url: http://opscode-vm-bento.s3.amazonaws.com/vagrant/virtualbox/opscode_centos-6.5_chef-provisionerless.box
    vagrantfile_erb: Vagrantfile.erb
    customize:
      memory: 512
  run_list:
  - recipe[yum::epel]
  attributes:
    riak:
      package:
        checksum:
          centos:
            "6": "a7a31a69e450b6fa259dbbb167a44b1ca30af775107345040226cc54b7f88dcb"
    riak_cs:
      package:
        checksum:
          centos:
            "6": "9282097cce71ad68d8412e34a2973ec213572c60d03db14a961b26b48ff853c5"
- name: centos-5.10
  driver_config:
    box: opscode-centos-5.10
    box_url: http://opscode-vm-bento.s3.amazonaws.com/vagrant/virtualbox/opscode_centos-5.10_chef-provisionerless.box
    vagrantfile_erb: Vagrantfile.erb
    customize:
      memory: 512
  run_list:
  - recipe[yum::epel]
  attributes:
    riak:
      package:
        checksum:
          centos:
            "5": "72541e1a52a6ce78a5fffce80f7a65ef6e339c99b2c81e350e203e128c36ae38"
    riak_cs:
      package:
        checksum:
          centos:
            "5": "46d09fb24a6c10347cf112a164932ead8ef746bc7d31473fa54df94f68e941ca"
suites:
- name: default
  run_list:
  - recipe[minitest-handler]
  - recipe[riak-cs::package]
  - recipe[riak]
  - recipe[riak-cs]
  - recipe[riak-cs::stanchion]
  - recipe[riak-cs-create-admin-user]
  attributes:
    riak_cs:
      package:
        version:
          major: 1
          minor: 4
          incremental: 4
    stanchion:
      package:
        version:
          major: 1
          minor: 4
          incremental: 3
    riak_cs_control:
      package:
        version:
          minor: 0
          incremental: 2
    riak:
      cs_version: "1.4.4"
      package:
        version:
          minor: 4
          incremental: 7
      config:
        riak_kv:
          storage_backend: riak_cs_kv_multi_backend
- name: default13
  run_list:
  - recipe[minitest-handler]
  - recipe[riak-cs::package]
  - recipe[riak]
  - recipe[riak-cs]
  - recipe[riak-cs::stanchion]
  - recipe[riak-cs-create-admin-user]
  attributes:
    riak_cs:
      package:
        version:
          major: 1
          minor: 3
          incremental: 1
    stanchion:
      package:
        version:
          major: 1
          minor: 3
          incremental: 1
    riak_cs_control:
      package:
        version:
          major: 1
          minor: 0
          incremental: 0
    riak:
      cs_version: "1.3.1"
      package:
        version:
          major: 1
          minor: 3
          incremental: 2
      config:
        riak_kv:
          storage_backend: riak_cs_kv_multi_backend
- name: enterprise
  run_list:
  - recipe[minitest-handler]
  - recipe[riak-cs::enterprise_package]
  - recipe[riak]
  - recipe[riak-cs]
  - recipe[riak-cs::stanchion]
  - recipe[riak-cs-create-admin-user]
  attributes:
    riak_cs:
      package:
        enterprise_key: <%= (ENV["RIAK_CS_ENTERPRISE_KEY"].nil? ? "" : ENV["RIAK_CS_ENTERPRISE_KEY"]) %>
        version:
          major: 1
          minor: 4
          incremental: 4
    stanchion:
      package:
        version:
          major: 1
          minor: 4
          incremental: 3
    riak_cs_control:
      package:
        version:
          major: 1
          minor: 0
          incremental: 2
    riak:
      cs_version: "1.4.4"
      package:
        version:
          major: 1
          minor: 4
          incremental: 7
        enterprise_key: <%= (ENV["RIAK_ENTERPRISE_KEY"].nil? ? "" : ENV["RIAK_ENTERPRISE_KEY"]) %>
      config:
        riak_kv:
          storage_backend: riak_cs_kv_multi_backend
- name: enterprise13
  run_list:
  - recipe[minitest-handler]
  - recipe[riak-cs::enterprise_package]
  - recipe[riak]
  - recipe[riak-cs]
  - recipe[riak-cs::stanchion]
  - recipe[riak-cs-create-admin-user]
  attributes:
    riak_cs:
      package:
        enterprise_key: <%= (ENV["RIAK_CS_ENTERPRISE_KEY"].nil? ? "" : ENV["RIAK_CS_ENTERPRISE_KEY"]) %>
        version:
          major: 1
          minor: 3
          incremental: 1
    stanchion:
      package:
        version:
          major: 1
          minor: 3
          incremental: 1
    riak_cs_control:
      package:
        version:
          major: 1
          minor: 0
          incremental: 0
    riak:
      cs_version: "1.3.1"
      package:
        version:
          major: 1
          minor: 3
          incremental: 4
        enterprise_key: <%= (ENV["RIAK_ENTERPRISE_KEY"].nil? ? "" : ENV["RIAK_ENTERPRISE_KEY"]) %>
      config:
        riak_kv:
          storage_backend: riak_cs_kv_multi_backend
