---
driver_plugin: vagrant
platforms:
- name: ubuntu-12.04
  driver_config:
    box: opscode-ubuntu-12.04
    box_url: https://opscode-vm.s3.amazonaws.com/vagrant/opscode_ubuntu-12.04_provisionerless.box
    vagrantfile_erb: Vagrantfile.erb
    customize:
      memory: 512
  run_list:
  - recipe[apt]
  attributes:
    riak:
      package:
        checksum:
          ubuntu:
            precise: "b4e4e31b8e1cd25ea4d3bcd9af94e7322ce1c08645425891574f57ba58f8c516"
    riak_cs:
      package:
        checksum:
          ubuntu:
            precise: "06896c4e46b99677f56729486b9a37d00f033f170574d11a4a7aee1e4e225a70"
- name: debian-7.1.0
  driver_config:
    box: opscode-debian-7.1.0
    box_url: https://opscode-vm-bento.s3.amazonaws.com/vagrant/opscode_debian-7.1.0_provisionerless.box
    vagrantfile_erb: Vagrantfile.erb
    customize:
      memory: 512
  run_list:
  - recipe[apt]
  attributes:
    riak:
      package:
        checksum:
          debian:
            "7": "ab5b07c9430aed4874020aa8c4688f1efa14f2a8fba5659fbcbf2004183b51fc"
    riak_cs:
      package:
        checksum:
          debian:
            "7": "e99e53cfcce112529fadf2fa785c9c059be298b85065de3602121f9c12c374a9"
- name: centos-6.4
  driver_config:
    box: opscode-centos-6.4
    box_url: https://opscode-vm.s3.amazonaws.com/vagrant/opscode_centos-6.4_provisionerless.box
    vagrantfile_erb: Vagrantfile.erb
    customize:
      memory: 512
  run_list:
  - recipe[yum::epel]
  attributes:
    riak:
      package:
        checksum:
          centos:
            "6": "5bfed85a02df7f297cf20402f147997b06c8ea59dbe860186a54e9dec2dc26e2"
    riak_cs:
      package:
        checksum:
          centos:
            "6": "ac1b375de7ac76f3df3d80832b9da2262d4c6b229e43a9918ac46329eda1cc60"
- name: centos-5.9
  driver_config:
    box: opscode-centos-5.9
    box_url: https://opscode-vm-bento.s3.amazonaws.com/vagrant/opscode_centos-5.9_provisionerless.box
    vagrantfile_erb: Vagrantfile.erb
    customize:
      memory: 512
  run_list:
  - recipe[yum::epel]
  attributes:
    riak:
      package:
        checksum:
          centos:
            "5": "c821ddea30cdce72464909ea0a6dd2bb9e0dada4041e2b56e3569bad11a5f869"
    riak_cs:
      package:
        checksum:
          centos:
            "5": "a3dd62e05b3bd0ff78739554f4248196680afea6ccf0b948f8077f9ed81ff384"
suites:
- name: default
  run_list:
  - recipe[minitest-handler]
  - recipe[riak-cs::package]
  - recipe[riak]
  - recipe[riak-cs]
  - recipe[riak-cs::stanchion]
  - recipe[riak-cs-create-admin-user]
  attributes:
    riak_cs:
      package:
        version:
          minor: 4
          incremental: 3
    stanchion:
      package:
        version:
          minor: 4
          incremental: 3
    riak_cs_control:
      package:
        version:
          minor: 0
          incremental: 2
    riak:
      cs_version: "1.4.3"
      package:
        version:
          minor: 4
          incremental: 2
      config:
        riak_kv:
          storage_backend: riak_cs_kv_multi_backend
- name: default13
  run_list:
  - recipe[minitest-handler]
  - recipe[riak-cs::package]
  - recipe[riak]
  - recipe[riak-cs]
  - recipe[riak-cs::stanchion]
  - recipe[riak-cs-create-admin-user]
  attributes:
    riak_cs:
      package:
        version:
          minor: 3
          incremental: 1
    stanchion:
      package:
        version:
          minor: 3
          incremental: 1
    riak_cs_control:
      package:
        version:
          minor: 0
          incremental: 0
    riak:
      cs_version: "1.3.1"
      package:
        version:
          minor: 3
          incremental: 2
      config:
        riak_kv:
          storage_backend: riak_cs_kv_multi_backend
- name: enterprise
  run_list:
  - recipe[minitest-handler]
  - recipe[riak-cs::enterprise_package]
  - recipe[riak]
  - recipe[riak-cs]
  - recipe[riak-cs::stanchion]
  - recipe[riak-cs-create-admin-user]
  attributes:
    riak_cs:
      package:
        enterprise_key: <%= (ENV["RIAK_CS_ENTERPRISE_KEY"].nil? ? "" : ENV["RIAK_CS_ENTERPRISE_KEY"]) %>
        version:
          minor: 4
          incremental: 3
    stanchion:
      package:
        version:
          minor: 4
          incremental: 3
    riak_cs_control:
      package:
        version:
          minor: 0
          incremental: 2
    riak:
      cs_version: "1.4.3"
      package:
        version:
          minor: 4
          incremental: 3
        enterprise_key: <%= (ENV["RIAK_ENTERPRISE_KEY"].nil? ? "" : ENV["RIAK_ENTERPRISE_KEY"]) %>
      config:
        riak_kv:
          storage_backend: riak_cs_kv_multi_backend
- name: enterprise13
  run_list:
  - recipe[minitest-handler]
  - recipe[riak-cs::enterprise_package]
  - recipe[riak]
  - recipe[riak-cs]
  - recipe[riak-cs::stanchion]
  - recipe[riak-cs-create-admin-user]
  attributes:
    riak_cs:
      package:
        enterprise_key: <%= (ENV["RIAK_CS_ENTERPRISE_KEY"].nil? ? "" : ENV["RIAK_CS_ENTERPRISE_KEY"]) %>
        version:
          minor: 3
          incremental: 1
    stanchion:
      package:
        version:
          minor: 3
          incremental: 1
    riak_cs_control:
      package:
        version:
          minor: 0
          incremental: 0
    riak:
      cs_version: "1.3.1"
      package:
        version:
          minor: 3
          incremental: 4
        enterprise_key: <%= (ENV["RIAK_ENTERPRISE_KEY"].nil? ? "" : ENV["RIAK_ENTERPRISE_KEY"]) %>
      config:
        riak_kv:
          storage_backend: riak_cs_kv_multi_backend
